$(document).ready(function(){var e=$("input[name='_method']").val(),r="";$("#tbAll").DataTable({aaSorting:[],columnDefs:[{orderable:!1,targets:[4]}]}),$("textarea").wysihtml5({locale:"pt-BR"});var t=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},i={onKeyPress:function(e,r,i,p){i.mask(t.apply({},arguments),p)}};function p(){this.setCustomValidity(validaCPF($(this).val())?"":"CPF inválido!")}function a(){var e;validaCNPJ($(this).val())?(this.setCustomValidity(""),14==(e=$(this).cleanVal()).length&&$.getJSON("//receitaws.com.br/v1/cnpj/"+e+"/?callback=?",function(e){if(!("erro"in e)&&"ERROR"!=e.status.toUpperCase()){var r=$("#form");r.find("#legal-name").val(e.nome),r.find("#trade-name").val(e.fantasia),r.find("#status").val(e.situacao),e.cep&&($(".zipcode").val(e.cep.replace(".","")),$(".number").val(""),$(".zipcode").trigger("input"))}})):this.setCustomValidity("CNPJ inválido!")}$(".phone").mask(t,i),$(".money").mask("#.##0,00",{reverse:!0}),$.fn.select2.defaults.set("language","pt-BR"),$(".select2").select2(),$(document).delegate(".client-type","change",function(){r=this.value,$(".not-value").val(""),"pj"==r?($("#cnpj").off("input").on("input",a).val(""),$("#cnpj").unmask(""),$("#cnpj").mask("00.000.000/0000-00"),$(".not-required-cnpj").prop("required",!0),$(".not-required-cpf").prop("required",!1),$(".email-required").prop("required",!0).prev().html('E-mail<span style="color: red;"><sup>&bull;</sup></span>'),$(".email-type-required").prop("required",!0).prev().html('Tipo<span style="color: red;"><sup>&bull;</sup></span>'),$("#div-cpf").hide(),$("#div-cnpj").show(),$("#cnpj").attr("data-step",2),$("#cpf").attr("data-step","")):"pf"==r?($("#cpf").off("input").on("input",p).val(""),$("#cpf").unmask(""),$("#cpf").mask("000.000.000-00"),$(".not-required-cnpj").prop("required",!1),$(".not-required-cpf").prop("required",!0),$(".email-required").prop("required",!1).prev().html("E-mail"),$(".email-type-required").prop("required",!1).prev().html("Tipo do E-mail"),$("#div-cnpj").hide(),$("#div-cpf").show(),$("#cnpj").attr("data-step",""),$("#cpf").attr("data-step",2)):($(".email-required").prop("required",!1).prev().html("E-mail"),$(".email-type-required").prop("required",!1).prev().html("Tipo"),$("#div-cnpj").hide(0,function(){$(".not-required-cnpj").prop("required",!1)}),$("#div-cpf").hide(0,function(){$(".not-required-cpf").prop("required",!1)}))}),$(document).delegate("#ie-indicator","change",function(){"contribuinte"==$(this).val()||"contribuinte_isento"==$(this).val()?($("#ie-value").prop("required",!0),$("#ie-value").prop("readonly",!1),$("#ie-value").prev().html('Inscrição Estadual<span style="color: red;"><sup>&bull;</sup></span>')):($("#ie-value").prev().html("Inscrição Estadual"),$("#ie-value").prop("readonly",!0),$("#ie-value").prop("required",!1),$("#ie-value").val(""))}),null==e?"pj"==$(".client-type").val()?($("#cnpj").off("input").on("input",a),$("#cnpj").mask("00.000.000/0000-00"),$(".not-required-cnpj").prop("required",!0),$(".not-required-cpf").prop("required",!1),"4892"==$(".city").val()&&$("#im").prop("required",!0).prev().html('Inscrição Municipal<span style="color: red;"><sup>&bull;</sup></span>')):($("#cpf").off("input").on("input",p),$("#cpf").mask("000.000.000-00"),$(".not-required-cnpj").prop("required",!1),$(".not-required-cpf").prop("required",!0)):($(".type-client:checked").each(function(){$(this).trigger("change")}),$("#cnpj").on("input",a),$("#cpf").on("input",p))});